define(["exports","babel-runtime/regenerator","jquery","../windows/windows","../websockets/binary_websockets","text!./tc.html","css!./tc.css"],function(e,n,t,a,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.init=void 0;var o=s(n),l=s(t),d=s(a),u=s(i),c=s(r);function s(e){return e&&e.__esModule?e:{default:e}}var f,m,p=null,h="";u.default.events.on("login",(f=o.default.mark(function e(n){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(p&&(p.dialog("destroy"),p=null),n.authorize.is_virtual)return e.abrupt("return");e.next=3;break;case 3:return e.next=5,u.default.cached.send({landing_company_details:n.authorize.landing_company_name});case 5:t=e.sent,h=t.landing_company_details&&t.landing_company_details.name;case 7:case"end":return e.stop()}},e,void 0)}),m=function(){var l=f.apply(this,arguments);return new Promise(function(r,o){return function n(e,t){try{var a=l[e](t),i=a.value}catch(e){return void o(e)}if(!a.done)return Promise.resolve(i).then(function(e){n("next",e)},function(e){n("throw",e)});r(i)}("next")})},function(e){return m.apply(this,arguments)}));var v=e.init=function(){if(h){var e=(0,l.default)(c.default).i18n();e.find(".tc_landing_comp_name").html(h),e.find(".button").click(function(){u.default.send({tnc_approval:1}).then(function(e){return window.location.reload()}),p.dialog("destroy")}),p=d.default.createBlankWindow((0,l.default)("<div/>"),{title:"Terms and Conditions".i18n(),width:580,minHeight:90,height:220,resizable:!1,collapsable:!1,minimizable:!1,maximizable:!1,closable:!0,modal:!0,closeOnEscape:!1,ignoreTileAction:!0,"data-authorized":"true",destroy:function(){p=null}}),e.appendTo(p),(0,l.default)("body").append(p.dialog("widget")),p.dialog("open");var n=getBinaryUrl("terms-and-conditions.html");Array.from(document.getElementsByClassName("tc-link")).forEach(function(e){return e.href=n})}};e.default={init:v}});